<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CineMax - Payment</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="layout.css" rel="stylesheet" />
    <style>
      .payment-step {
        border-left: 3px solid #007bff;
        background: #f8f9fa;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 0 10px 10px 0;
      }
      .payment-step.completed {
        border-left-color: #28a745;
        background: #d4edda;
      }
      .payment-step.active {
        border-left-color: #ffc107;
        background: #fff3cd;
      }
      .credit-card {
        background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
      }
      .card-number {
        font-family: "Courier New", monospace;
        font-size: 1.2rem;
        letter-spacing: 2px;
      }
      .security-badges {
        display: flex;
        gap: 15px;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
      }
      .security-badge {
        padding: 5px 10px;
        background: #f8f9fa;
        border-radius: 5px;
        font-size: 0.8rem;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <!-- Progress Steps -->
          <div class="row mb-4">
            <div class="col-md-3">
              <div class="payment-step completed">
                <i class="fas fa-ticket-alt fa-2x mb-2 text-success"></i>
                <h6>1. Select Tickets</h6>
                <small>Completed</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="payment-step completed">
                <i class="fas fa-chair fa-2x mb-2 text-success"></i>
                <h6>2. Choose Seats</h6>
                <small>Completed</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="payment-step active">
                <i class="fas fa-credit-card fa-2x mb-2 text-warning"></i>
                <h6>3. Payment</h6>
                <small>In Progress</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="payment-step">
                <i class="fas fa-check-circle fa-2x mb-2 text-muted"></i>
                <h6>4. Confirmation</h6>
                <small>Pending</small>
              </div>
            </div>
          </div>

          <div class="row">
            <!-- Payment Form -->
            <div class="col-lg-8">
              <div class="card">
                <div class="card-header">
                  <h5>
                    <i class="fas fa-credit-card me-2"></i>Payment Information
                  </h5>
                </div>
                <div class="card-body">
                  <!-- Payment Method Selection -->
                  <div class="mb-4">
                    <h6>Select Payment Method</h6>
                    <div class="row">
                      <div class="col-md-4">
                        <div class="card payment-method" data-method="card">
                          <div class="card-body text-center">
                            <i
                              class="fas fa-credit-card fa-2x text-primary mb-2"
                            ></i>
                            <p class="mb-0">Credit/Debit Card</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="card payment-method" data-method="paypal">
                          <div class="card-body text-center">
                            <i
                              class="fab fa-paypal fa-2x text-primary mb-2"
                            ></i>
                            <p class="mb-0">PayPal</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="card payment-method" data-method="wallet">
                          <div class="card-body text-center">
                            <i
                              class="fas fa-wallet fa-2x text-primary mb-2"
                            ></i>
                            <p class="mb-0">Digital Wallet</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Credit Card Form -->
                  <div id="cardPaymentForm">
                    <form id="paymentForm">
                      <div class="row mb-3">
                        <div class="col-12">
                          <label class="form-label">Cardholder Name</label>
                          <input
                            type="text"
                            class="form-control"
                            placeholder="John Doe"
                            required
                          />
                        </div>
                      </div>

                      <div class="row mb-3">
                        <div class="col-12">
                          <label class="form-label">Card Number</label>
                          <div class="input-group">
                            <input
                              type="text"
                              class="form-control"
                              id="cardNumber"
                              placeholder="1234 5678 9012 3456"
                              maxlength="19"
                              required
                            />
                            <span class="input-group-text">
                              <i class="fas fa-credit-card" id="cardIcon"></i>
                            </span>
                          </div>
                        </div>
                      </div>

                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label class="form-label">Expiry Date</label>
                          <input
                            type="text"
                            class="form-control"
                            placeholder="MM/YY"
                            maxlength="5"
                            required
                          />
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">CVV</label>
                          <input
                            type="text"
                            class="form-control"
                            placeholder="123"
                            maxlength="3"
                            required
                          />
                        </div>
                      </div>

                      <!-- Billing Address -->
                      <div class="mb-3">
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="sameAsContact"
                            checked
                          />
                          <label class="form-check-label" for="sameAsContact">
                            Use contact information for billing
                          </label>
                        </div>
                      </div>

                      <div id="billingAddress" style="display: none">
                        <h6>Billing Address</h6>
                        <div class="row mb-3">
                          <div class="col-12">
                            <input
                              type="text"
                              class="form-control"
                              placeholder="Street Address"
                            />
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <input
                              type="text"
                              class="form-control"
                              placeholder="City"
                            />
                          </div>
                          <div class="col-md-3">
                            <input
                              type="text"
                              class="form-control"
                              placeholder="State"
                            />
                          </div>
                          <div class="col-md-3">
                            <input
                              type="text"
                              class="form-control"
                              placeholder="ZIP Code"
                            />
                          </div>
                        </div>
                      </div>

                      <!-- Security Features -->
                      <div class="security-badges">
                        <div class="security-badge">
                          <i class="fas fa-shield-alt me-1"></i>SSL Encrypted
                        </div>
                        <div class="security-badge">
                          <i class="fas fa-lock me-1"></i>Secure Payment
                        </div>
                        <div class="security-badge">
                          <i class="fas fa-credit-card me-1"></i>PCI Compliant
                        </div>
                      </div>

                      <button
                        type="submit"
                        class="btn btn-primary btn-lg w-100 mt-4"
                      >
                        <i class="fas fa-lock me-2"></i>Complete Payment
                      </button>
                    </form>
                  </div>

                  <!-- PayPal Form -->
                  <div id="paypalPaymentForm" style="display: none">
                    <div class="text-center py-4">
                      <i class="fab fa-paypal fa-5x text-primary mb-3"></i>
                      <h5>Pay with PayPal</h5>
                      <p class="text-muted">
                        You will be redirected to PayPal to complete your
                        payment
                      </p>
                      <button class="btn btn-primary btn-lg">
                        <i class="fab fa-paypal me-2"></i>Continue with PayPal
                      </button>
                    </div>
                  </div>

                  <!-- Digital Wallet Form -->
                  <div id="walletPaymentForm" style="display: none">
                    <div class="text-center py-4">
                      <i class="fas fa-mobile-alt fa-5x text-primary mb-3"></i>
                      <h5>Digital Wallet Payment</h5>
                      <p class="text-muted">
                        Choose your preferred digital wallet
                      </p>
                      <div class="d-grid gap-2">
                        <button class="btn btn-dark btn-lg">
                          <i class="fab fa-apple me-2"></i>Apple Pay
                        </button>
                        <button class="btn btn-success btn-lg">
                          <i class="fab fa-google me-2"></i>Google Pay
                        </button>
                        <button class="btn btn-info btn-lg">
                          <i class="fab fa-samsung me-2"></i>Samsung Pay
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Order Summary -->
            <div class="col-lg-4">
              <div class="card sticky-top">
                <div class="card-header">
                  <h5><i class="fas fa-receipt me-2"></i>Order Summary</h5>
                </div>
                <div class="card-body">
                  <div class="order-item mb-3">
                    <div class="d-flex justify-content-between">
                      <strong>Avengers: Endgame</strong>
                    </div>
                    <div class="text-muted small">
                      Saturday, July 29, 2025 at 7:30 PM<br />
                      Seats: D7, D8<br />
                      2 tickets × $12.99
                    </div>
                  </div>

                  <div class="order-item mb-3" id="foodOrderSummary">
                    <h6>Food & Drinks</h6>
                    <div class="d-flex justify-content-between">
                      <span>Classic Popcorn × 1</span>
                      <span>$6.99</span>
                    </div>
                    <div class="d-flex justify-content-between">
                      <span>Coca Cola × 2</span>
                      <span>$9.98</span>
                    </div>
                  </div>

                  <hr />

                  <div class="d-flex justify-content-between mb-2">
                    <span>Subtotal</span>
                    <span>$42.95</span>
                  </div>
                  <div class="d-flex justify-content-between mb-2">
                    <span>Service Fee</span>
                    <span>$4.30</span>
                  </div>
                  <div class="d-flex justify-content-between mb-2">
                    <span>Tax</span>
                    <span>$3.78</span>
                  </div>

                  <hr />

                  <div class="d-flex justify-content-between">
                    <strong>Total</strong>
                    <strong class="text-primary">$51.03</strong>
                  </div>

                  <!-- Promo Code -->
                  <div class="mt-3">
                    <div class="input-group">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Promo code"
                      />
                      <button class="btn btn-outline-secondary" type="button">
                        Apply
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Customer Support -->
              <div class="card mt-3">
                <div class="card-body text-center">
                  <h6>Need Help?</h6>
                  <p class="small text-muted">
                    Our customer support team is here to help
                  </p>
                  <button class="btn btn-outline-primary btn-sm">
                    <i class="fas fa-phone me-1"></i>Call Support
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        setupPaymentMethods();
        setupCardValidation();
        setupBillingAddress();
      });

      function setupPaymentMethods() {
        $(".payment-method").click(function () {
          $(".payment-method").removeClass("border-primary");
          $(this).addClass("border-primary");

          const method = $(this).data("method");

          // Hide all payment forms
          $("#cardPaymentForm, #paypalPaymentForm, #walletPaymentForm").hide();

          // Show selected payment form
          $(`#${method}PaymentForm`).show().addClass("fade-in");
        });

        // Set default selection
        $('.payment-method[data-method="card"]').click();
      }

      function setupCardValidation() {
        // Format card number
        $("#cardNumber").on("input", function () {
          let value = $(this).val().replace(/\D/g, "");
          let formattedValue = value.replace(/(\d{4})(?=\d)/g, "$1 ");
          $(this).val(formattedValue);

          // Update card icon based on card type
          updateCardIcon(value);
        });

        // Format expiry date
        $('input[placeholder="MM/YY"]').on("input", function () {
          let value = $(this).val().replace(/\D/g, "");
          if (value.length >= 2) {
            value = value.substring(0, 2) + "/" + value.substring(2, 4);
          }
          $(this).val(value);
        });

        // CVV validation
        $('input[placeholder="123"]').on("input", function () {
          let value = $(this).val().replace(/\D/g, "");
          $(this).val(value);
        });
      }

      function updateCardIcon(cardNumber) {
        const $icon = $("#cardIcon");

        if (cardNumber.startsWith("4")) {
          $icon.removeClass().addClass("fab fa-cc-visa");
        } else if (cardNumber.startsWith("5")) {
          $icon.removeClass().addClass("fab fa-cc-mastercard");
        } else if (cardNumber.startsWith("3")) {
          $icon.removeClass().addClass("fab fa-cc-amex");
        } else {
          $icon.removeClass().addClass("fas fa-credit-card");
        }
      }

      function setupBillingAddress() {
        $("#sameAsContact").change(function () {
          if ($(this).is(":checked")) {
            $("#billingAddress").slideUp();
          } else {
            $("#billingAddress").slideDown();
          }
        });
      }

      // Handle payment form submission
      $("#paymentForm").submit(function (e) {
        e.preventDefault();

        // Show processing
        const $submitBtn = $(this).find('button[type="submit"]');
        const originalText = $submitBtn.html();
        $submitBtn
          .html('<i class="fas fa-spinner fa-spin me-2"></i>Processing...')
          .prop("disabled", true);

        // Simulate payment processing
        setTimeout(function () {
          // Redirect to confirmation page
          window.location.href = "confirmation.html?bookingId=BK" + Date.now();
        }, 3000);
      });

      // Handle promo code
      $(".input-group button").click(function () {
        const promoCode = $(this).siblings("input").val();
        if (promoCode.toLowerCase() === "save10") {
          showAlert("Promo code applied! 10% discount added.", "success");
          // Update total here
        } else if (promoCode) {
          showAlert("Invalid promo code.", "error");
        }
      });

      function showAlert(message, type) {
        const alertClass =
          type === "success" ? "alert-success" : "alert-danger";
        const alert = `
                <div class="alert ${alertClass} alert-dismissible fade show position-fixed top-0 end-0 m-3" 
                     style="z-index: 9999;" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
        $("body").append(alert);

        setTimeout(() => {
          $(".alert").fadeOut();
        }, 3000);
      }
    </script>
  </body>
</html>
